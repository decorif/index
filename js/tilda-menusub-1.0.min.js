function t_menusub_init(n){$("#rec"+n+" .t-menusub").each(function(){var t=$(this).attr("data-submenu-hook");if(void 0!==t&&""!=t){var e="",u=!1;$("#rec"+n+" a.t-menu__link-item").each(function(){$(this).attr("data-menu-submenu-hook")&&(u=!0)}),(e=u?$('a[data-menu-submenu-hook="'+t+'"]'):$('a[href="'+t+'"]')).addClass("t-menusub__target-link"),e.attr("data-tooltip-menu-id",n),t_menusub_add_arrow(n,e,t),t_menusub_set_up_menu(n,e,t),t_menusub_highlight()}}),$(window).bind("resize",function(){isMobile||$("#rec"+n+" .t-menusub").each(function(){t_menusub_hide_submenu($(this).find(".t-menusub__menu"))})}),$(window).bind("orientationchange",function(){isMobile&&$("#rec"+n+" .t-menusub").each(function(){t_menusub_hide_submenu($(this).find(".t-menusub__menu"))})})}function t_menusub_set_up_menu(t,e,u){var n=$("#rec"+t+' .t-menusub[data-submenu-hook="'+u+'"] .t-menusub__menu');isMobile?t_menusub_set_up_menu_mobile(t,e,n):t_menusub_set_up_menu_desktop(t,e,n,u),$(window).bind("scroll",t_throttle(function(){isMobile||n.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(n)},300))}function t_menusub_open_inME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")||(t.find(".t280__menu").css("transition","none"),t.find(".t280__bottom").css("transition","none"),t.find(".t280__menu__wrapper").addClass("t280__menu_static"))}function t_menusub_close_inME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")&&t.find(".t280__menu__wrapper").removeClass("t280__menu_static")}function t_menusub_set_up_menu_mobile(n,t,s){var _=$("#rec"+n+" .t-menusub").attr("data-submenu-margin");t.on("click",function(t){if(980<$(window).width()&&$("#rec"+n+" .t-menusub__menu").each(function(){t_menusub_hide_submenu($(this))}),s.hasClass("t-menusub__menu_show"))t_menusub_hide_submenu(s);else{t_menusub_show($(this),s,_);var e=$(this).parents(".t280"),u=t_menusub_is_mobile_ME401(e);t_menusub_is_static_ME401(e),"n"==e.find(".t280__menu__wrapper").attr("data-submenu-static")&&0<e.length&&u&&t_menusub_open_inME401(e)}t.preventDefault()}),$(document).click(function(t){var e=$(t.target).hasClass("t-menusub__menu")||0<$(t.target).parents(".t-menusub__menu").length,u=$(t.target).hasClass("t-menusub__target-link")||0<$(t.target).parents(".t-menusub__target-link").length;u&&($(t.target).hasClass("t-menusub__target-link")?$(t.target):$(t.target).parents(".t-menusub__target-link")).attr("data-tooltip-menu-id")!=n&&s.hasClass("t-menusub__menu_show")&&t_menusub_hide_submenu(s);e||u||!s.hasClass("t-menusub__menu_show")||t_menusub_hide_submenu(s)})}function t_menusub_set_up_menu_desktop(t,e,u,n){var s,_=$("#rec"+t+" .t-menusub").attr("data-submenu-margin");e.add(u).on("mouseover",function(){$(this).hasClass("t-menusub__menu")&&!$(this).hasClass("t-menusub__menu_show")||(clearTimeout(s),$(this).hasClass("t-menusub__menu")&&u.hasClass("t-menusub__menu_show")||t_menusub_show($(this),u,_))}),e.add(u).on("mouseout",function(){s=setTimeout(function(){t_menusub_hide_submenu(u)},300)}),e.on("click auxclick",function(t){t.preventDefault()})}function t_menusub_show(t,e,u){var n=e.outerHeight(),s=e.outerWidth(),_=t.height(),i=t.outerWidth(),a=$(window).height(),m=$(window).width(),o=$(window).scrollTop(),b=t.position().left;void 0!==u&&""!=u&&(u=1*u.replace("px",""),u+=10);var r=t.position().top+_+u,h=b;o+a<r+n?(r=Math.max(r-n-_-2*u,o),e.removeClass("t-menusub__menu_bottom").addClass("t-menusub__menu_top")):e.removeClass("t-menusub__menu_top").addClass("t-menusub__menu_bottom"),$(window).width()<=980&&(r=0),h+s/2<m?(h+=(i-s)/2)<0&&(h=10):h=m-s-10,e.css({display:"block",left:h,top:r}),e.offsetHeight,e.addClass("t-menusub__menu_show"),t.addClass("t-menusub__target-link_active")}function t_menusub_hide_submenu(t){var e=t.parents(".t280"),u=t_menusub_is_mobile_ME401(e);t.css({display:"",left:"",top:""}),t.removeClass("t-menusub__menu_show"),$(".t-menusub__target-link_active").removeClass("t-menusub__target-link_active"),"n"==e.find(".t280__menu__wrapper").attr("data-submenu-static")&&isMobile&&u&&t_menusub_close_inME401(e)}function t_menusub_add_arrow(t,e,u){var n=$("#rec"+t+' .t-menusub[data-submenu-hook="'+u+'"]').attr("data-add-submenu-arrow");void 0!==n&&""!=n&&e.each(function(){var t=$(this).height();$(this).append('<div class="t-menusub__arrow" style="height: '+t+'px;"></div>')})}function t_menusub_highlight(){var t=window.location.href,e=window.location.pathname;"/"==t.substr(t.length-1)&&(t=t.slice(0,-1)),"/"==e.substr(e.length-1)&&(e=e.slice(0,-1)),"/"==e.charAt(0)&&(e=e.slice(1)),""==e&&(e="/"),$('.t-menusub__list-item a[href="'+t+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+t+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'"]').addClass("t-active"),$('.t-menusub__list-item a[href="'+e+'/"]').addClass("t-active"),$('.t-menusub__list-item a[href="/'+e+'/"]').addClass("t-active")}function t_menusub_is_static_ME401(t){t.find(".t280__menu__wrapper").hasClass("t280__menu_static")||t.find(".t280__menu__wrapper").attr("data-submenu-static","n")}function t_menusub_is_mobile_ME401(t){var e=t.find(".t280__menu").height(),u=t.find(".t280__bottom").height(),n=t.find(".t280__container").height();return $(window).height()-u-n-40<e}