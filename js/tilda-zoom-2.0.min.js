function t_initZoom(){$('[data-zoomable="yes"]').length&&(window.tzoominited=!0,$('[data-zoomable="yes"]:not(.t-slds__thumbs_gallery)').addClass("t-zoomable"),$("body").append('<div class="t-zoomer__wrapper">      <div class="t-zoomer__container">      </div>      <div class="t-zoomer__bg"></div>      <div class="t-zoomer__close">        <div class="t-zoomer__close-line t-zoomer__close-line-first"></div>        <div class="t-zoomer__close-line t-zoomer__close-line-second"></div>      </div>    </div>'),t_showZoom(),$(".t-zoomer__close, .t-zoomer__bg").click(function(o){$("body").removeClass("t-zoomer__show"),$("body").removeClass("t-zoomer__show_fixed"),$(document).unbind("keydown"),0!=$(document).find(".t-popup_show").length&&$(document).keydown(function(o){27==o.keyCode&&t_store_closePopup(!1)})}))}function t_showZoom(){$(".t-records").on("click",".t-zoomable",t_zoomHandler),$(".t-records").on("click",".t-slds__thumbs_gallery",t_zoomHandler)}function t_zoomHandler(){$(document).unbind("keydown"),$("body").addClass("t-zoomer__show"),$(".t-zoomer__container").html('<div class="t-carousel__zoomed">      <div class="t-carousel__zoomer__slides">        <div class="t-carousel__zoomer__inner">        </div>        <div class="t-carousel__zoomer__control t-carousel__zoomer__control_left" data-zoomer-slide="prev">          <div class="t-carousel__zoomer__arrow__wrapper t-carousel__zoomer__arrow__wrapper_left">            <div class="t-carousel__zoomer__arrow t-carousel__zoomer__arrow_left t-carousel__zoomer__arrow_small"></div>          </div>        </div>        <div class="t-carousel__zoomer__control t-carousel__zoomer__control_right" data-zoomer-slide="next">          <div class="t-carousel__zoomer__arrow__wrapper t-carousel__zoomer__arrow__wrapper_right">            <div class="t-carousel__zoomer__arrow t-carousel__zoomer__arrow_right t-carousel__zoomer__arrow_small"></div>          </div>        </div>      </div>    </div>');var o=$(this).closest(".r").attr("id"),e=$("#"+o).find(".t-zoomable:not(.t-slds__thumbs_gallery)");$("#"+o).find(".t-slds").length&&(e=$(this).closest(".t-slds").find(".t-zoomable:not(.t-slds__thumbs_gallery)"));e.each(function(){var o=$(this).attr("data-img-zoom-url").split(",");if($(this).is("img"))var e=$(this).attr("title"),t=$(this).attr("data-img-zoom-descr");if($(this).is("div"))e=$(this).attr("title"),t=$(this).attr("data-img-zoom-descr");if(void 0!==e&&!1!==e)var s='<div class="t-zoomer__title t-name t-descr_xxs">'+e+"</div>";else s="";if(void 0!==t&&!1!==t)var _='<div class="t-zoomer__descr t-descr t-descr_xxs">'+t+"</div>";else _="";$(".t-carousel__zoomer__inner").append('<div class="t-carousel__zoomer__item"><div class="t-carousel__zoomer__wrapper"><img class="t-carousel__zoomer__img" src="'+o+'"></div><div class="t-zoomer__comments">'+s+_+"</div></div>")}),$(".t-carousel__zoomer__item").each(function(){$(this).css("display","block");var o=$(this).find(".t-zoomer__comments"),e=o.find(".t-zoomer__title"),t=o.find(".t-zoomer__descr");e.length||t.length||o.css("padding","0");var s=o.innerHeight();$(this).css("display",""),$(this).find(".t-carousel__zoomer__wrapper").css("bottom",s)});var t,s=$(this).attr("data-img-zoom-url"),_=$('.t-carousel__zoomer__img[src="'+s+'"]'),r=$(".t-carousel__zoomer__item");_.closest(r).show(0),r.each(function(){$(this).attr("data-zoomer-slide-number",$(this).index())}),pos=parseFloat($(".t-carousel__zoomer__item:visible").attr("data-zoomer-slide-number")),$(".t-carousel__zoomer__control_right").click(function(){pos=(pos+1)%r.length,r.hide(0).eq(pos).show(0)}),$(".t-carousel__zoomer__control_left").click(function(){pos=(pos-1)%r.length,r.hide(0).eq(pos).show(0)}),$(document).keydown(function(o){37==o.keyCode&&(pos=(pos-1)%r.length,r.hide(0).eq(pos).show(0)),39==o.keyCode&&(pos=(pos+1)%r.length,r.hide(0).eq(pos).show(0)),27==o.keyCode&&($("body").removeClass("t-zoomer__show"),$("body").removeClass("t-zoomer__show_fixed"),$(document).unbind("keydown"),0!=$(document).find(".t-popup_show").length&&$(document).keydown(function(o){27==o.keyCode&&t_store_closePopup(!1)}))}),$(".t-carousel__zoomer__inner").bind("touchstart",function(o){t=o.originalEvent.touches[0].clientX}),$(".t-carousel__zoomer__inner").bind("touchend",function(o){var e=o.originalEvent.changedTouches[0].clientX;e+50<t?(pos=(pos-1)%r.length,r.hide(0).eq(pos).show(0)):t<e-50&&(pos=(pos+1)%r.length,r.hide(0).eq(pos).show(0))}),1<$(".t-carousel__zoomer__item").size()?$("body").addClass("t-zoomer__show_fixed"):$(".t-carousel__zoomer__control").css("display","none"),$(".t-carousel__zoomer__inner").click(function(o){$("body").removeClass("t-zoomer__show"),$("body").removeClass("t-zoomer__show_fixed"),$(document).unbind("keydown")});var i=0;$(window).scroll(function(o){var e=$(this).scrollTop();i<e&&($("body").not(".t-zoomer__show_fixed").removeClass("t-zoomer__show"),$(document).unbind("keydown")),i=e})}$(document).ready(function(){t_initZoom()});